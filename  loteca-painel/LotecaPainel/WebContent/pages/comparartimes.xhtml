<?xml version='1.0' encoding='UTF-8'?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets" 
                xmlns:f="http://java.sun.com/jsf/core" 
                xmlns:h="http://java.sun.com/jsf/html" 
                template="/WEB-INF/layout/template.xhtml"
                xmlns:c="http://java.sun.com/jsp/jstl/core" >

<ui:define name="body">


<h:form id="formMain"> 

<p:messages id="msgs"></p:messages>

<h:panelGrid columns="5" style="padding:5px;">
	<h:outputText value="Time: "/>
	<p:selectOneMenu value="#{bBParciais.timeSelecionado1}">
		<f:selectItems value="#{bBParciais.timesEnum}" var="tenum" itemLabel="#{tenum.nome} - #{tenum.dono}" itemValue="#{tenum}"/>
	</p:selectOneMenu>
	<h:outputText value="comparar com: "/>
	<p:selectOneMenu value="#{bBParciais.timeSelecionado2}">
		<f:selectItem noSelectionOption="true" itemValue="#{null}" itemLabel="TODOS"/>
		<f:selectItems value="#{bBParciais.timesEnum}" var="tenum" itemLabel="#{tenum.nome} - #{tenum.dono}" itemValue="#{tenum}"/>
	</p:selectOneMenu>
	
	<p:commandButton actionListener="#{bBParciais.analisarRodada}" value="Analisar Rodada" ajax="true"
			 styleClass="botao" update=":formMain:msgs"/>
	</h:panelGrid>
	<div style="float:left; padding-right: 5px; padding-top:5px;">
		<div>
		<p:dataTable var="a2" value="#{bBParciais.timeComparado.atletas}" rowIndexVar="index2" paginator="false" style="width:300px; float:top;" rendered="#{not empty bBParciais.timeComparado.atletas}"  >
		 		<f:facet name="header">
		 			<h:outputText value="#{bBParciais.timeComparado.nome}"></h:outputText>
		 		</f:facet>
		 	
				<p:column  style="#{a2.atletaExclusivo?'background-color:yellow;':''}">	
					<f:facet name="header">
					</f:facet>
					<h:outputText value="#{index2+1}"/>
					<f:facet name="footer">
		       			<h:outputText value="" style="font-weight:bold;"/>
		       		</f:facet>
				</p:column>
				<p:column style="#{a2.atletaExclusivo?'background-color:yellow;':''}">
					<f:facet name="header">
						<h:outputText />
					</f:facet>
					<p:graphicImage url="../img/times/#{a2.clube.slug}.png" width="20" rendered="#{not empty a2.clube.slug}"></p:graphicImage>
					<f:facet name="footer">
		       			<h:outputText value="" style="font-weight:bold;"/>
		       		</f:facet>
				</p:column>
				<p:column style="width:120px; #{a2.atletaExclusivo?'background-color:yellow;':''}">
					<f:facet name="header">
						<h:outputText value="Atleta"/>
					</f:facet>
					<h:outputText value="#{a2.apelido}"/>
					<f:facet name="footer">
		       			<h:outputText value="" style="font-weight:bold;"/>
		       		</f:facet>
				</p:column>
				<p:column  style="#{a2.atletaExclusivo?'background-color:yellow;':''}">
					<f:facet name="header">
						<h:outputText value=""/>
					</f:facet>
					<h:outputText value="#{a2.posicao.abreviacao}"/>
					<f:facet name="footer">
		       			<h:outputText value="" style="font-weight:bold;"/>
		       		</f:facet>
				</p:column>
				<p:column  style="#{a2.atletaExclusivo?'background-color:yellow;':''}">
					<f:facet name="header">
						<h:outputText value=""/>
					</f:facet>
					<h:outputText value="#{a2.pontos}"/>
					<f:facet name="footer">
		       			<h:outputText value="" style="font-weight:bold;"/>
		       		</f:facet>
				</p:column>
				<p:column  style="#{a2.atletaExclusivo?'background-color:yellow;':''}">
					<f:facet name="header">
						<h:outputText value=""/>
					</f:facet>
					<h:outputText value="#{a2.qtdAtletasIguais}"/>
					<f:facet name="footer">
		       			<h:outputText value="" style="font-weight:bold;"/>
		       		</f:facet>
				</p:column>
		 	</p:dataTable>
		 </div>
		 <div style="padding-top:10px;">
		 	<p:panelGrid columns="1" rendered="#{not empty bBParciais.timeComparado.atletas}">
			 	<h:outputText value="Times mais iguais:" style="font-weight:bold;"/>
			 	<h:outputText value="#{bBParciais.timesMaisParecidos1.nome} x #{bBParciais.timesMaisParecidos2.nome} (#{bBParciais.timesMaisParecidos2.qtdAtletasIguais})"/>
			 	<h:outputText value="Time com mais Exclusivos:" style="font-weight:bold; color:grey;"/>
			 	<h:outputText value=" - "/>
		 	</p:panelGrid>
		 </div>
	</div>
	<div>
	<h:panelGroup columns="1" id="painelComparativo" style="border:dotted 0px #ffffff;" >
 	<p:panelGrid columns="1"  style="width:auto;" rendered="#{not empty bBParciais.timesComparar}" >
 		<f:facet name="header">
 			<h:outputText value="Painel Comparativo"></h:outputText>
 		</f:facet>
 		
		 <ui:repeat var="timec" value="#{bBParciais.timesComparar}">
		 	<p:dataTable var="a" value="#{timec.atletas}" rowIndexVar="index" paginator="false" style="width:300px; float:left; padding-right:5px; padding-bottom:5px;"  rendered="#{not empty timec.atletas}" >
		 		<f:facet name="header">
		 			<h:outputText value="#{timec.nome}"></h:outputText>
		 		</f:facet>
		 	
				<p:column style="#{a.atletaIgual?'background-color:#d9d9d9;':''}">	
					<f:facet name="header">
					</f:facet>
					<h:outputText value="#{index+1}"/>
					<f:facet name="footer">
		       			<h:outputText value="" style="font-weight:bold;"/>
		       		</f:facet>
				</p:column>
				<p:column  style="#{a.atletaIgual?'background-color:#d9d9d9;':''}">
					<f:facet name="header">
						<h:outputText />
					</f:facet>
					<p:graphicImage url="../img/times/#{a.clube.slug}.png" width="20" rendered="#{not empty a.clube.slug}"></p:graphicImage>
					<f:facet name="footer">
		       			<h:outputText value="" style="font-weight:bold;"/>
		       		</f:facet>
				</p:column>
				<p:column style="width:120px; #{a.atletaIgual?'background-color:#d9d9d9;':''}">
					<f:facet name="header">
						<h:outputText value="Atleta"/>
					</f:facet>
					<h:outputText value="#{a.apelido}"/>
					<f:facet name="footer">
		       			<h:outputText value="" style="font-weight:bold;"/>
		       		</f:facet>
				</p:column>
				<p:column  style="#{a.atletaIgual?'background-color:#d9d9d9;':''}">
					<f:facet name="header">
						<h:outputText value=""/>
					</f:facet>
					<h:outputText value="#{a.posicao.abreviacao}"/>
					<f:facet name="footer">
		       			<h:outputText value="" style="font-weight:bold;"/>
		       		</f:facet>
				</p:column>
				<p:column  style="#{a.atletaIgual?'background-color:#d9d9d9;':''}">
					<f:facet name="header">
						<h:outputText value=""/>
					</f:facet>
					<h:outputText value="#{a.pontos}"/>
					<f:facet name="footer">
		       			<h:outputText value="" style="font-weight:bold;"/>
		       		</f:facet>
				</p:column>
				<f:facet name="footer">
					<h:outputText value="Qtd de Jogadores Iguais: #{timec.qtdAtletasIguais}"></h:outputText>
				</f:facet>
		 	</p:dataTable>
		 </ui:repeat>
	</p:panelGrid>
	</h:panelGroup>

	
	</div>
</h:form>

</ui:define>
</ui:composition>