<?xml version='1.0' encoding='UTF-8'?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets" 
                xmlns:f="http://java.sun.com/jsf/core" 
                xmlns:h="http://java.sun.com/jsf/html" 
                template="/WEB-INF/layout/template.xhtml"
                xmlns:c="http://java.sun.com/jsp/jstl/core" >

<ui:define name="body">

<h:form id="formMain"> 
<h:panelGrid columns="1">

<p:commandButton actionListener="#{bBParciais.carregarPainel}" value="Atualizar Dados" ajax="true"
		update=":formMain:geral, :formMain:growl" styleClass="botao" icon="ui-icon-pencil"/>
<p:outputPanel id="geral">
		<p:growl id="growl" showDetail="true" />
		<p:dataTable var="a" value="#{bBParciais.atletas}" paginator="false" id="mapa_atletas_times" 
		style="width:100%; float:left;">
				<p:column sortBy="#{a.indice}">	
					<f:facet name="header">
					</f:facet>
					<h:outputText value="#{a.indice}"/>
					<f:facet name="footer">
		       			<h:outputText value="" style="font-weight:bold;"/>
		       		</f:facet>
				</p:column>
				<p:column sortBy="#{a.clube.id}">
					<f:facet name="header">
						<h:outputText />
					</f:facet>
					<p:graphicImage url="../img/times/#{a.clube.slug}.png" width="20" rendered="#{not empty a.clube.slug}"></p:graphicImage>
					<f:facet name="footer">
		       			<h:outputText value="" style="font-weight:bold;"/>
		       		</f:facet>
				</p:column>
				<p:column sortBy="#{a.apelido}">
					<f:facet name="header">
						<h:outputText value="Atleta"/>
					</f:facet>
					<h:outputText value="#{a.apelido}"/>
					<f:facet name="footer">
		       			<h:outputText value="" style="font-weight:bold;"/>
		       		</f:facet>
				</p:column>
				<p:column sortBy="#{a.posicao.abreviacao}">
					<f:facet name="header">
						<h:outputText value="Pos."/>
					</f:facet>
					<h:outputText value="#{a.posicao.abreviacao}"/>
					<f:facet name="footer">
		       			<h:outputText value="" style="font-weight:bold;"/>
		       		</f:facet>
				</p:column>
				<p:columns value="#{bBParciais.times}" var="t" columnIndexVar="colIndex" style="text-align:center;">
		            <f:facet name="header">
		                   <h:outputText value="#{t.nome}"/>
		                  
		            </f:facet>
		            <h:outputText value="#{not empty a.pontos?a.pontos:' X '}" rendered="#{not empty a.times[t.nome]}" style="#{a.pontos lt 0?'color:red;':'color:black;'}"/>
		       		<f:facet name="footer">
		       			<h:outputText value="#{t.pontuacao} pts" style="font-weight:bold;"/>
		       		</f:facet>
		        </p:columns>	
		        <p:column sortBy="#{a.clubeCasa.id}">
					<f:facet name="header">
						<h:outputText value="Confronto" />
					</f:facet>
					<p:graphicImage url="../img/times/#{a.clubeCasa.slug}.png" width="20" rendered="#{not empty a.clubeVisitante.slug}"></p:graphicImage>
					<h:outputText value=" X " rendered="#{not empty a.clubeVisitante.slug}"/>
					<p:graphicImage url="../img/times/#{a.clubeVisitante.slug}.png" width="20" rendered="#{not empty a.clubeVisitante.slug}"></p:graphicImage>
					<f:facet name="footer">
		       			<h:outputText value="" style="font-weight:bold;"/>
		       		</f:facet>
				</p:column>
				<p:column sortBy="#{a.dataJogo}">
					<f:facet name="header">
						<h:outputText value="Data" />
					</f:facet>
					<h:outputText value="#{a.dataJogo}" />
					<f:facet name="footer">
		       			<h:outputText value="" style="font-weight:bold;"/>
		       		</f:facet>
				</p:column>
				<p:column sortBy="#{a.qtdTimes}">
					<f:facet name="header">
						<h:outputText value="Qtd Esc." />
					</f:facet>
					<h:outputText value="#{a.qtdTimes}" />
					<f:facet name="footer">
		       			<h:outputText value="" style="font-weight:bold;"/>
		       		</f:facet>
				</p:column>
			</p:dataTable>
			
	</p:outputPanel>
</h:panelGrid>

</h:form>

</ui:define>
</ui:composition>